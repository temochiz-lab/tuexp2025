<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>My experiment (v7 unified)</title>

  <!-- jsPsych v7 本体 + CSS（v8は読み込まない） -->
  <script src="https://unpkg.com/jspsych@7.3.4"></script>
  <link rel="stylesheet" href="https://unpkg.com/jspsych@7.3.4/css/jspsych.css">

  <!-- v7系プラグイン（使用しているもののみ） -->
  <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.3"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.1.3"></script>
  <script src="https://unpkg.com/@jspsych/plugin-survey-text@1.1.3"></script>
  <script src="https://unpkg.com/@jspsych/plugin-survey-likert@1.1.3"></script>
  <script src="https://unpkg.com/@jspsych/plugin-fullscreen@1.2.1"></script>
  <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.3"></script>
  <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice@1.1.3"></script>
  <script src="https://unpkg.com/@jspsych/plugin-audio-button-response@1.2.0"></script>

  <script>
    // ========================================================
    // 起動時パラメータの設定
    // ========================================================
    var expsubject ; // 使いまわすグローバル変数
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const pattern = urlParams.get('pattern');
    var testmode = urlParams.get('test');
    switch (pattern) {
      case '0':
        expsubject = "<font color=red>出題パターン 0(全部確認)</font>";
        break;
      case '1':
        expsubject = "<font color=red>出題パターン 1</font>";
        break;
      case '2':
        expsubject = "<font color=red>出題パターン 2</font>";
        break;
      case '3':
        expsubject = "<font color=red>出題パターン 3</font>";
        break;
      case '4':
        expsubject = "<font color=red>出題パターン 4</font>";
        break;
      default:
        expsubject = "<font color=red>出題パターン 1</font>";
        pattern = 1 ;
        break;
    }
  </script>
  <script>
  // ======================================================
  // プログラム本体
  // ======================================================
    // 保存用のファイル名を生成
    function yyyymmddhhmise() {
      // 日付時間秒を文字列で返す	
      const dt = new Date();
      var yyyy = dt.getFullYear();
      var mm = ('00' + (dt.getMonth() + 1)).slice(-2);
      var dd = ('00' + dt.getDate()).slice(-2);
      var hh = ('00' + dt.getHours()).slice(-2);
      var mi = ('00' + dt.getMinutes()).slice(-2);
      var se = ('00' + dt.getSeconds()).slice(-2);

      var answer = yyyy + mm + dd + "-" + hh + mm + se;
      return (answer);
    }

  // ======================================================
    // 説明文やお約束のパーツ
    // グローバル変数
  // ======================================================
  var expname  = "sugiyama2025-0812-002-"             // 実験名
    var filename = expname + yyyymmddhhmise() + ".csv"; // 保存時のファイル名
    var stimulusDuration  = 120000 ;                    // 問題表示時間  2分(msec) 2 x 60 x 1000 = 120000
    var responseTimeLimit = 60000 ;                     // 回答制限時間  1分(msec) 1 x 60 x 1000 = 60000
    var resttime_msec     = 180000 ;                    // 休憩時間      3分(msec) 3 x 60 x 1000 = 180000

    // ここから開始
    var jsPsych = initJsPsych({
      on_finish: function () {
        jsPsych.data.get().localSave('csv', filename);
        //    jsPsych.data.displayData();
      }
    });

    // テストモード用パラメーター
    var testmodeText = '' ;
    testmode = 1 ; // ************************** 開発時のみ・後でコメント **************************
    if (testmode == '1' ) {
      testmodeText = " <font color = 'blue'>テストモード</font>" ;
      stimulusDuration  = 10000 ;                      // 問題表示時間10秒
      responseTimeLimit = 10000 ;                      // 回答制限時間10秒
      resttime_msec     = 10000 ;                      // 休憩時間10秒
    }

    // フルスクリーン開始
    var enter_fullscreen = {
      type: jsPsychFullscreen,
      message: '<p>実験名: ' + expname + expsubject + testmodeText +'</p><p>開始ボタンを押すと全画面表示で実験が始まります。</p>',
      button_label: "開始",
      fullscreen_mode: true
    }

  // ======================================================
  // 縦表示の質問群を作成する
  // テスト(スキップ操作)時にタイマーイベントをクリアしないので、
  // (1) 質問① がスキップ、(2)短い時間でスキップが出る。

  // ======================================================
  function MakeVerticalQuestions(Answer, Questions, PopupText) {
    mustflag = true ;if (testmode ==1) mustflag = false; 
    for (let i = 0; i < Questions.length; i++) {
      Answer.push({
        type: jsPsychSurveyMultiChoice,
        button_label: '次へ',
        // ▼「問題文を表示」ボタン＋モーダル本体を preamble に直埋め込み
        preamble: `
          <button id="show-problem" type="button">問題文を表示</button>

          <!-- ポップアップ(オーバーレイ) -->
          <div id="problem-overlay" style="
            display:none; position:fixed; inset:0;
            background:rgba(0,0,0,0.4); z-index:9998;"></div>

          <!-- モーダル 横幅が足りないときは width で変更-->
          <div id="problem-modal" role="dialog" aria-modal="true" aria-labelledby="problem-title" style="
            display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
            width:min(100vw, 1100px); max-height:80vh; overflow:auto;
            background:#fff; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.25);
            padding:20px; z-index:9999;">
            <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:12px;">
              <button id="close-problem" type="button">閉じる</button>
            </div>
            <div id="problem-content">
              ${typeof PopupText !== "undefined" ? PopupText : ""}
            </div>
          </div>
        `,
        questions: [
          {
            prompt: Questions[i].prompt,
            options: Questions[i].options,
            required: mustflag,
            horizontal: false // 横並びにしない（縦書き表示の基礎）
          }
        ],
        on_load: () => {
          // --- 縦書きレイアウトの適用 ---
          const style = document.createElement('style');
          style.textContent = `
            /* 全体を横並びにする */
            .jspsych-survey-multi-choice {
              display: flex;
              flex-direction: row;
              gap: 2em;
            }
            /* 質問文を縦書きに */
            .jspsych-survey-multi-choice-question {
              writing-mode: vertical-rl;
              text-orientation: upright;
            }
            /* 選択肢部分も縦書きに */
            .jspsych-survey-multi-choice-option label {
              writing-mode: vertical-rl;
              text-orientation: upright;
            }
            /* ボタンをセンタリング */
            #jspsych-survey-multi-choice-next {
              display: block;
              margin: 2em auto;
            }
          `;
          document.head.appendChild(style);

          // --- モーダルの開閉 ---
          const showBtn = document.getElementById('show-problem');
          const overlay = document.getElementById('problem-overlay');
          const modal = document.getElementById('problem-modal');
          const closeBtn = document.getElementById('close-problem');

          const open = () => {
            if (overlay) overlay.style.display = 'block';
            if (modal) modal.style.display = 'block';
            if (overlay) overlay.setAttribute('aria-hidden', 'false');
          };
          const close = () => {
            if (overlay) overlay.style.display = 'none';
            if (modal) modal.style.display = 'none';
            if (overlay) overlay.setAttribute('aria-hidden', 'true');
          };

          if (showBtn) showBtn.addEventListener('click', open);
          if (closeBtn) closeBtn.addEventListener('click', close);
          if (overlay) overlay.addEventListener('click', close);
          document.addEventListener('keydown', (e) => { if (e.key === 'Escape') close(); });

          // --- 回答時間切れの処理 ---
          const timer = setTimeout(() => {
            const btn = document.querySelector('#jspsych-survey-multi-choice-next');
            if (btn) btn.click();
          }, typeof responseTimeLimit !== "undefined" ? responseTimeLimit : 60000); // デフォルト値も設定

          // --- 手動クリック時にタイマー解除 ---
          const nextBtn = document.querySelector('#jspsych-survey-multi-choice-next');
          if (nextBtn) nextBtn.addEventListener('click', () => clearTimeout(timer), { once: true });
        }
      });
    }
  }
  
  // ======================================================
  // ここまで
  // ======================================================

    // 実験の説明
    var Page1 = {
      type: jsPsychHtmlButtonResponse,
      margin_vertical: '100px',
      margin_horizontal: '100px',
      stimulus: '<div align="left" style="width:80%;margin:auto;"><font> \
      <br><br><br>\
      私は、常磐大学人間科学部心理学科4年の杉山真尋です。 <br>\
      本研究の目的は、文章を読む際の体験や印象がどのように形成されるのかを検討することにあります。日常的な読解場面における反応や感じ方の傾向を把握するために、パソコン画面上で文章を読んでいただく課題を通して実験を行います。 <br>\
      <br><br>\
      本実験への参加は完全に任意であり、参加を強制するものではありません。実施中に気分が優れない、または答えたくないと感じた場合は、いつでも中断していただいて構いません。また、参加の有無や途中中止によって、参加者が不利益を被ることは一切ありませんのでご安心ください。さらに、実験後に協力を取り消すことも可能です。 <br>\
      <br><br>\
      ご協力いただいたデータは、研究室内で厳重に管理され、直ちに記号化された上で統計的に処理されます。個人情報が特定されることはなく、プライバシー保護には十分に配慮しております。得られたデータは卒業論文の作成および常磐大学への提出、必要に応じた学術学会等での発表といった、学術研究の目的に限って使用されます。分析後のデータは10年間保管し、その後は個人情報保護に配慮した方法で適切に廃棄いたします。 <br>\
      <br><br>\
      上記の趣旨をご理解いただいたうえで、どうぞ自然な形で課題にご参加ください。皆さまのご協力に深く感謝申し上げます。 <br>\
      <br></font></div>',
      choices: ['次へ'],
      on_load: function () { // 以降、ctrl + q でスキップする
        // すでに登録済みなら二重登録しない
        if (!window.__globalCtrlQHandler) {
          window.__globalCtrlQHandler = function (e) {
            if (e.ctrlKey && (e.key === 'q' || e.key === 'Q')) {
              e.preventDefault();

              // 1) まず “次へ” ボタン類があればクリック
              const selectors = [
                '.jspsych-btn',
                '#jspsych-survey-text-next',
                '#jspsych-survey-multi-choice-next',
                '#jspsych-survey-likert-next',
                '.jspsych-html-button-response-button',
                '.jspsych-audio-button-response-button'
              ];
              let clicked = false;
              for (const sel of selectors) {
                const btn = document.querySelector(sel);
                if (btn) { btn.click(); clicked = true; break; }
              }

              // 2) ボタンが無いプラグイン（キーボード系など）の場合は強制終了
              if (!clicked && typeof jsPsych !== 'undefined' && jsPsych.finishTrial) {
                try { jsPsych.finishTrial(); } catch (_) {}
              }
            }
          };
          document.addEventListener('keydown', window.__globalCtrlQHandler, { passive: false });
        }
      }
    };

    // Facesheet / 被検者情報の入力 完成時には入力必須にしておく
    mustflag = true ;if (testmode ==1) mustflag = false; 
    var Page2 = {
      type: jsPsychSurveyText,
      questions: [
        { prompt: '学籍番号と年齢を入力してください。<br><br><br>あなたの学籍番号を入力してください。', columns: 5, required: mustflag, name: 'id' },
        { prompt: 'あなたの年齢を入力してください。', columns: 5, required: mustflag, name: 'age' },
      ],
      button_label: '次へ',
  };

    var Page3 = {
      type: jsPsychHtmlButtonResponse,
      margin_vertical: '100px',
      margin_horizontal: '100px',
      stimulus: '<div align="left"><font> \
      <br><br><br>\
      この実験では、文章を読んで、その内容に関する質問に答えていただきます。 <br>\
      文章の表示時間や回答内容は、研究目的のために記録されます。 <br>\
      途中で休憩時間や記憶に関するテストも含まれます。 <br>\
      <br><br><br>\
      以下のことに注意してください： <br>\
      ・実験中は静かな環境で行ってください。 <br>\
      ・わからない言葉や内容があっても、まずはご自身の理解で読み進めてください。 <br>\
      <br><br><br>\
      まず初めに操作方法の確認のための練習問題を行います。 <br>\
      準備が出来たら、「開始する」を押してください。 <br>\
      <br><br></font></div>',
      choices: ['開始する'],
    };

    // 実験の終了
    var bye = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: 'これで実験は終了です。 PCには触れずに実験者の指示に従ってください。',
    };

    // フルスクリーン終了
    var exit_fullscreen = {
      type: jsPsychFullscreen,
      fullscreen_mode: false,
      delay_after: 0
    }

    // プリロード
    var preload = {
      type: jsPsychPreload,
      auto_preload: true
    }

    // 休憩(本番時には3分に)
    var resttime = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: "3分間休憩します",
      choices: 'q',
      stimulus_duration: resttime_msec, // 前の方でグローバル変数で定義
      trial_duration: resttime_msec,
    };

  // ======================================================
  // 練習試行
  // ======================================================
    var PracticeTrials = {
      timeline: [],
    };
  // ---------------------------------------------------------------------
    var PracticePage1 = {
      type: jsPsychHtmlButtonResponse,
      margin_vertical: '100px',
      margin_horizontal: '100px',
      stimulus: '<div align="left" style="width:80%;margin:auto;"><font> \
      <br><br><br>\
      これから実験を開始いたします。 <br>\
      <br><br><br>\
      初めに２分間、文章を読んでいただきます。２分間の間に読み終わった場合は、「読み終えた」ボタンを押してください。なお「読み終えた」ボタンを押しても画面は切り替わりませんので、残りの時間は文章を読み返すなどにお使いください。 <br>\
      <br><br><br>\
      まずは全体の流れをつかむつもりで、スムーズに読み進めてください。 <br>\
      細かいところは後から読み返していただければ大丈夫です。 <br>\
      <br><br><br>\
      準備が出来たら「開始」ボタンを押してください。 <br>\
      開始と同時にタイマーがスタートされます。 <br>\
      <br><br></font></div>',
      choices: ['開始する'],
    };
  // ---------------------------------------------------------------------
    var PracticeExam1Text = '<div align="left" style="width:90%;margin:auto;">\
    <div style="writing-mode: vertical-rl; text-orientation: mixed; line-height: 2.2; font-size: 1.0em; letter-spacing: 0.1em; height: 600px; overflow-y: auto; font-family: &quot;MS Mincho&quot;, &quot;ＭＳ 明朝&quot;, serif;">\
    練習問題<br> \
      春のある日、私は友人の佐藤と新しくできた商店街を歩いていた。小さな雑貨屋やカフェが並び、通りには甘い匂いが漂っている。佐藤は以前からこの場所をチェックしていたらしく、「ここのパン屋は評判らしいよ」と笑顔で言った。店先には焼き立てのクロワッサンが並び、ガラス越しに見える厨房では、職人が丁寧に生地を成形している。私たちは迷わず中に入り、それぞれ好きなパンを選んだ。私はチョコレート入り、佐藤はハムとチーズのサンドだ。店内の窓際席に座り、温かい紅茶と一緒に味わう。口に広がる甘みと香ばしさは、何とも言えない幸福感をもたらした。 \
    \
    食後、私たちは近くの古本屋に立ち寄った。棚には古びた装丁の小説や、昭和時代の雑誌が整然と並んでいる。佐藤は旅行記を手に取り、ページをめくる手が止まらない様子だった。私は表紙に引かれて、あるエッセイ集を手に取った。読み進めると、著者が旅先で出会った人々の温かさが静かに綴られていた。その文章に心を動かされ、私は思わず購入を決めた。 \
    \
    その後、私たちは商店街をさらに歩き、小さな花屋に立ち寄った。色とりどりの花が並び、春の訪れを感じさせる。佐藤が一輪の黄色いチューリップを選び、私も青いデルフィニウムに目を奪われた。花を手に持ちながら、私たちは次に喫茶店へ向かった。窓際の席に座り、外の景色を眺めながら、ゆっくりとコーヒーを飲んだ。何気ない会話の中に、心地よい時間が流れていくのを感じた。気づけば夕方、商店街はオレンジ色の光に包まれていた。帰り道、佐藤が「また来よう」と言い、私も深くうなずいた。こうした小さな一日は、後から振り返ると宝物のように輝くのだと思った。 \
    </div></div>';
  // ---------------------------------------------------------------------
    var PracticeExam1 = {
      type: jsPsychHtmlKeyboardResponse,
      margin_vertical: '100px',
      margin_horizontal: '100px',
      stimulus: PracticeExam1Text,
      choices: 'q',
      trial_duration: stimulusDuration, // 前の方でグローバル変数で定義
    };
  // ---------------------------------------------------------------------
    // 質問内容を配列で定義
    var f1 = '<span style="font-family: MS Mincho;">' ; // 設問のフォントも指定だったらここ
    var f2 = '<span style="font-family: MS Gothic;">' ; // 設問のフォントも指定だったらここ
    var fend = '</span>' ;                              //
    const practiceQuestions = [
      {
        prompt: '問１　商店街で最初に訪れた店はどこか？' ,
        options: [
          '　古本屋', 
          '　パン屋', 
          '　雑貨屋', 
          '　カフェ', 
          '　八百屋'
        ]
      },
      {
        prompt: '問２　佐藤が選んだパンはどれか？' ,
        options: [
          '　クロワッサン', 
          '　チョコレート入りパン', 
          '　ハムとチーズのサンド', 
          '　バゲット', 
          '　メロンパン'
        ]
      },
      {
        prompt: '問３　私が購入した本のジャンルはどれか？',
        options: [
          '　旅行記', 
          '　エッセイ集', 
          '　小説', 
          '　雑誌', 
          '　料理本'
        ]
      },
      {
        prompt: '問４　本文で「オレンジ色の光」と表現されているのは何の時間帯か？',
        options: [
          '　朝', 
          '　正午', 
          '　午後3時', 
          '　夕方', 
          '　夜'
        ]
      },
      {
        prompt: '問５　最後に筆者が述べていることとして最も適切なのはどれか？',
        options: [
          '　大きな出来事こそが人生を輝かせる', 
          '　日常の小さな時間も価値がある', 
          '　商店街は都会よりも魅力的だ', 
          '　佐藤との友情は特別だ', 
          '　旅先での経験は忘れられない'
        ]
      }
    ];
  // ---------------------------------------------------------------------
    // 縦表示の質問群を作成
    const PracticeAnswer = []; // ここに出来上がる
    MakeVerticalQuestions(PracticeAnswer, practiceQuestions, PracticeExam1Text) ;
  // ---------------------------------------------------------------------
    var QofFont_scale = [
      "全くそう思わない",
      "そう思わない",
      "どちらでもない",
      "そう思う",
      "非常にそう思う"
    ];
    mustflag = true ;if (testmode ==1) mustflag = false; 
    var QofFont = {
      type: jsPsychSurveyLikert,
      button_label: "次へ",
      scale_width: 700,
      questions: [
        { prompt: "文字がはっきり読める", name: 'Q01', labels: QofFont_scale , required: mustflag},
        { prompt: "文字がくっきり見える", name: 'Q02', labels: QofFont_scale , required: mustflag},
        { prompt: "文字の太さが適切だと感じた", name: 'Q03', labels: QofFont_scale , required: mustflag},
        { prompt: "語彙や表現の意味をすぐに理解できた", name: 'Q04', labels: QofFont_scale , required: mustflag},
        { prompt: "読んだ内容が頭に入りやすかった", name: 'Q05', labels: QofFont_scale , required: mustflag},
        { prompt: "読み終えた後内容を思い出せる", name: 'Q06', labels: QofFont_scale , required: mustflag},
        { prompt: "文章の要点を把握しやすかった", name: 'Q07', labels: QofFont_scale , required: mustflag},
        { prompt: "読むリズムが途切れにくかった", name: 'Q8', labels: QofFont_scale , required: mustflag},
        { prompt: "途中で立ち止まらずスムーズに読めた", name: 'Q9', labels: QofFont_scale , required: mustflag},
        { prompt: "読むスピードが速く感じた", name: 'Q10', labels: QofFont_scale , required: mustflag},
        { prompt: "全体を読むのに必要な時間が短く感じた", name: 'Q11', labels: QofFont_scale , required: mustflag},
      ],
    }
  // ---------------------------------------------------------------------

    PracticeTrials.timeline.push(PracticePage1, PracticeExam1);
    // タイムラインに追加
    for (let i = 0; i < PracticeAnswer.length; i++) { PracticeTrials.timeline.push(PracticeAnswer[i]); }
    PracticeTrials.timeline.push(QofFont, resttime);

    // ---------------------------------------------------------------------
    // 本番試行
    // ------------------------------------------------------------------------------
    
    // 本番試行の問題格納用
    var Trials = {
      timeline: [],
    };
    var ExamText = [];       // 問題文(最初の表示とポップアップ用のテキスト)
    var Exam = [] ;          // 最初の表示オブジェクト
    var ExamQuestions = [] ; // 縦書き質問群
    var ExamAnswer = [];     // 縦書き質問オブジェクト群（2次元配列）
    var ExamNumber ;         // 配列の添え字用

  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  // 問題１
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  ExamNumber = 1 ; // koko
  ExamText[ExamNumber] = '<div align="left" style="width:90%;margin:auto;">\
    <div style="writing-mode: vertical-rl; text-orientation: mixed; line-height: 2.2; font-size: 1.0em; letter-spacing: 0.1em; height: 600px; overflow-y: auto; font-family: &quot;MS Mincho&quot;, &quot;ＭＳ 明朝&quot;, serif;">\
    文章１<br> \
    時間とは、我々にとってどれほど確かなものだろうか。時計の針は均等に進むが、経験される時間は常にゆがみ、濃淡をもって流れる。それゆえ時間は、物理的事実であると同時に、意味づけられた現象でもある。つまり、時間は人によって「解釈される」ものであって、単に流れるものではない。\
    ある出来事が意味をもつのは、しばしばそれが過去となってからである。経験の真っ只中では、その価値や位置づけは不明瞭だが、後になって文脈の中に配置されることで「意味ある出来事」となる。ここには、意味が時間を遡って形成されるという逆流的構造がある。　\
    だがこの逆流は、時間の一方向性と矛盾する。過去は変わらないはずだが、意味は後から与えられる以上、我々の現在は絶えず過去を書き換えているとも言える。記憶は事実を保存するのではなく、現在の自己にとっての妥当性に基づいて再構成される。すなわち、時間の流れは直線的であっても、意味の流れは循環的である。　　　　　\
    また未来は、希望や予測として現在に影を落とす。予想される未来は、現在の選択を方向づける。だがこの未来は、まだ訪れていない以上、想像の産物であり、その不確かさゆえに、現在を強く規定する。「今を生きる」という感覚すら、未来の予感を含んだ構造の中で生まれている。　\
    こうして、過去・現在・未来はいずれも固定されたものではなく、互いに交錯しながら意味を生成する。時間とは流れるものではなく、意味が構成される舞台であり、出来事が生じる順序ではなく、出来事が持ちうる価値をめぐる関係性なのである。すなわち、我々が時間を経験するとは、自己という存在の構成そのものを意味する。\
    </div></div>';
  // ---------------------------------------------------------------------
    Exam[ExamNumber] = { 
      type: jsPsychHtmlKeyboardResponse,
      margin_vertical: '100px',
      margin_horizontal: '100px',
      stimulus: ExamText[ExamNumber],
      choices: 'q',
      trial_duration: stimulusDuration, // 前のグローバル変数で定義
    };
  // ---------------------------------------------------------------------
    // 質問内容を配列で定義
    ExamQuestions[ExamNumber] = [
      {
        prompt: '問１ 筆者の主張として最も適切なのはどれか。',
        options: [
          '　①時間は人間の記憶によって直線的に捉えられる。', 
          '　②出来事の意味は、経験の瞬間に確定する。', 
          '　③時間とは、物理的現象というより意味の構造である。', 
          '　④過去は変えられない以上、意味も固定的である。', 
          '　⑤未来を考えることは現在の妨げとなる。'
        ]
      },
      {
        prompt: '問２「意味が時間を遡って形成される」とはどういうことか。',
        options: [
          '　①意味ある出来事は予め予定されているという思想である。', 
          '　②出来事が起こった瞬間には意味がなく、後から文脈が与えられる。', 
          '　③時間は常に因果に従って進行するという認識である。', 
          '　④過去は未来の視点からのみ語られるという決定論である。', 
          '　⑤出来事の価値は、その時点での感情によって固定される。 '
        ]
      },
      {
        prompt: '問３ 本文の内容に最も合致する考え方はどれか。',
        options: [
          '　①記憶は過去を忠実に保持する重要な情報資源である。', 
          '　②意味の再構成により、過去の出来事も変化しうる。', 
          '　③未来に希望をもたぬ者は、時間を経験することができない。', 
          '　④現在を理解するには、まず未来を捨てる必要がある。', 
          '　⑤出来事の意味は、発生の順序に従って変化する。'
        ]
      },
      {
        prompt: '問４ 本文における「未来」の特徴として最も適切なのはどれか。',
        options: [
          '　①客観的予測によって構成される安定した領域である。', 
          '　②現在に対して価値中立的に作用する想念である。', 
          '　③想像にすぎないが、現在の行動に実質的影響を与える。', 
          '　④過去の反復としてのみ捉えられる時間の残響である。', 
          '　⑤意識されることなく到来する、偶然性の領域である。'
        ]
      },
      {
        prompt: '問５ 本文に通底する世界観に最も近いものはどれか。',
        options: [
          '　①人間は過去と未来に翻弄され、現在を生きることができない。', 
          '　②時間とは単なる流れではなく、人間によって構築される関係的な次元である。', 
          '　③意味とは物事に本来的に備わったものであり、時間とは無関係である。', 
          '　④現在の選択こそが絶対的であり、時間の他の要素は従属的である。', 
          '　⑤時間の構造を理解するには、物理学的観測が最も信頼できる手段である。'
        ]
      }
    ];
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  // 問題2
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  ExamNumber = 2 ; // koko
  ExamText[ExamNumber] = '<div align="left" style="width:90%;margin:auto;">\
    <div style="writing-mode: vertical-rl; text-orientation: mixed; line-height: 2.2; font-size: 1.0em; letter-spacing: 0.1em; height: 600px; overflow-y: auto; font-family: &quot;MS Mincho&quot;, &quot;ＭＳ 明朝&quot;, serif;">\
    文章２<br> \
    制度とは、秩序を確保するために設計された枠組みである。だがそれが機能するのは、人々が自らを制度に従属させることを選ぶときだけである。この選択は、しばしば無意識に行われ、制度はあたかも当然の前提として受け入れられる。こうして制度は、人間の行動を規定するのではなく、人間が自らを規定可能な存在として振る舞うことによって成立する。 \
    一方で、制度が前提とする秩序は常に逸脱の可能性に晒されている。すべての制度は、それによって排除されるもの、つまり逸脱を含むことで初めて輪郭を持つ。逸脱がなければ制度は可視化されない。むしろ逸脱が制度の存在を逆説的に明らかにする。逸脱は秩序の敵ではなく、秩序が秩序として自覚される契機である。 \
    また逸脱は、単なる制度の否定ではない。それは制度の限界を露呈させ、時に制度の内部から制度を刷新する力ともなる。制度は、逸脱によって批判され、再定義され、延命される。制度に対する盲目的服従は制度を腐敗させるが、絶え間ない逸脱が制度を鍛える。制度と逸脱は対立ではなく、共依存の関係にある。 \
    しかし、多くの場合、逸脱は例外として処理され、個人の逸失や逸脱者の人格に還元される。制度に挑むことが、逸脱者に烙印を押す構造そのものが、制度の防衛機構である。だがそれは、制度が本来持っていた柔軟性や可塑性を放棄し、自己目的化している兆候でもある。 \
    制度を問い直すには、逸脱を異常として隔離するのではなく、それが何を照らし出しているかを読む視線が必要だ。逸脱は破壊ではなく、構造の裂け目を顕にする。そしてその裂け目を通して初めて、制度が保持してきた暗黙の選好や、排除の論理を捉えることができるのである。 \
    </div></div>';
  // ---------------------------------------------------------------------
    Exam[ExamNumber] = { 
      type: jsPsychHtmlKeyboardResponse,
      margin_vertical: '100px',
      margin_horizontal: '100px',
      stimulus: ExamText[ExamNumber],
      choices: 'q',
      trial_duration: stimulusDuration, // 前のグローバル変数で定義
    };
  // ---------------------------------------------------------------------
    // 質問内容を配列で定義
    ExamQuestions[ExamNumber] = [
      {
        prompt: '問１ 筆者の主張として最も適切なのはどれか。',
        options: [
          '　① 制度は人間によって管理されるべき絶対的枠組みである。', 
          '　② 制度とは逸脱の排除によってのみ成立するものである。', 
          '　③ 逸脱は制度の敵であり、徹底的に無化されるべきである。', 
          '　④ 制度は逸脱によって可視化され、時に刷新される。', 
          '　⑤ 制度の持続は、逸脱を厳格に管理する能力にかかっている。'
        ]
      },
      {
        prompt: '問２ 本文によれば、逸脱が制度を明らかにするのはなぜか。',
        options: [
          '　① 逸脱は制度の内在的矛盾を具体的に示すため。', 
          '　② 逸脱は制度の成員からの信頼を失墜させるため。', 
          '　③ 制度の論理は逸脱の処理に失敗するから。', 
          '　④ 逸脱が制度の適用範囲の拡張を可能にするから。', 
          '　⑤ 逸脱がなければ制度の存在そのものが意識されないから。 '
        ]
      },
      {
        prompt: '問３ 本文の論理から導かれる考えに最も近いものはどれか。',
        options: [
          '　① 制度は完全でなければ正当化されない。', 
          '　② 逸脱が制度の枠内に収まらない限り、それは社会的脅威である。', 
          '　③ 制度は逸脱を経験することで進化する可能性を持つ。', 
          '　④ 制度の正統性は、多数派による支持に依存する。', 
          '　⑤ 逸脱は制度と断絶した全く別の論理に基づいている。 '
        ]
      },
      {
        prompt: '問４ 本文において「制度の防衛機構」として示唆されているのはどれか。',
        options: [
          '　① 逸脱を異常と見なして個人の問題に還元する構造', 
          '　② 制度を批判的に捉え直す社会的合意形成の機構', 
          '　③ 逸脱を制度に取り込むための法的整備のこと', 
          '　④ 逸脱者を制度の維持者として再配置すること', 
          '　⑤ 逸脱が制度外にあるという前提そのものを否定すること '
        ]
      },
      {
        prompt: '問５ 本文全体に共通する制度観として最も適切なのはどれか。',
        options: [
          '　① 制度は逸脱を排除することで秩序を保つ防壁である。', 
          '　② 制度は固定的であり、逸脱はそれと常に敵対する。', 
          '　③ 制度と逸脱は相互に依存し、制度の変化を可能にする。', 
          '　④ 制度の本質は逸脱を許容しない厳密な論理にある。', 
          '　⑤ 制度は人間の本性に反する人工的な構造である。 '
        ]
      }
    ];
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  // 問題3
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  ExamNumber = 3 ; // koko
  ExamText[ExamNumber] = '<div align="left" style="width:90%;margin:auto;">\
    <div style="writing-mode: vertical-rl; text-orientation: mixed; line-height: 2.2; font-size: 1.0em; letter-spacing: 0.1em; height: 600px; overflow-y: auto; font-family: &quot;MS Mincho&quot;, &quot;ＭＳ 明朝&quot;, serif;">\
    文章３<br> \
    </div></div>';
  // ---------------------------------------------------------------------
    Exam[ExamNumber] = { 
      type: jsPsychHtmlKeyboardResponse,
      margin_vertical: '100px',
      margin_horizontal: '100px',
      stimulus: ExamText[ExamNumber],
      choices: 'q',
      trial_duration: stimulusDuration, // 前のグローバル変数で定義
    };
  // ---------------------------------------------------------------------
    // 質問内容を配列で定義
    ExamQuestions[ExamNumber] = [
      {
        prompt: '問１',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問２',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問３',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問４',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問５',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      }
    ];
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  // 問題4
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  ExamNumber = 4 ; // koko
  ExamText[ExamNumber] = '<div align="left" style="width:90%;margin:auto;">\
    <div style="writing-mode: vertical-rl; text-orientation: mixed; line-height: 2.2; font-size: 1.0em; letter-spacing: 0.1em; height: 600px; overflow-y: auto; font-family: &quot;MS Mincho&quot;, &quot;ＭＳ 明朝&quot;, serif;">\
    文章４<br> \
    </div></div>';
  // ---------------------------------------------------------------------
    Exam[ExamNumber] = { 
      type: jsPsychHtmlKeyboardResponse,
      margin_vertical: '100px',
      margin_horizontal: '100px',
      stimulus: ExamText[ExamNumber],
      choices: 'q',
      trial_duration: stimulusDuration, // 前のグローバル変数で定義
    };
  // ---------------------------------------------------------------------
    // 質問内容を配列で定義
    ExamQuestions[ExamNumber] = [
      {
        prompt: '問１',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問２',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問３',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問４',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問５',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      }
    ];
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  // 問題5
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  ExamNumber = 5 ; // koko
  ExamText[ExamNumber] = '<div align="left" style="width:90%;margin:auto;"> \
    <div style="writing-mode: vertical-rl; text-orientation: mixed; line-height: 2.2; font-size: 1.0em; letter-spacing: 0.1em; height: 600px; overflow-y: auto; font-family: &quot;MS Gothic&quot;, &quot;ＭＳ ゴシック&quot;, monospace;"> \
    文章５<br> \
    </div></div>';
  // ---------------------------------------------------------------------
    Exam[ExamNumber] = { 
      type: jsPsychHtmlKeyboardResponse,
      margin_vertical: '100px',
      margin_horizontal: '100px',
      stimulus: ExamText[ExamNumber],
      choices: 'q',
      trial_duration: stimulusDuration, // 前のグローバル変数で定義
    };
  // ---------------------------------------------------------------------
    // 質問内容を配列で定義
    ExamQuestions[ExamNumber] = [
      {
        prompt: '問１',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問２',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問３',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問４',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問５',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      }
    ];
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  // 問題6
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  ExamNumber = 6 ; // koko
  ExamText[ExamNumber] = '<div align="left" style="width:90%;margin:auto;">\
    <div style="writing-mode: vertical-rl; text-orientation: mixed; line-height: 2.2; font-size: 1.0em; letter-spacing: 0.1em; height: 600px; overflow-y: auto; font-family: &quot;MS Gothic&quot;, &quot;ＭＳ ゴシック&quot;, monospace;"> \
    文章６<br> \
    </div></div>';
  // ---------------------------------------------------------------------
    Exam[ExamNumber] = { 
      type: jsPsychHtmlKeyboardResponse,
      margin_vertical: '100px',
      margin_horizontal: '100px',
      stimulus: ExamText[ExamNumber],
      choices: 'q',
      trial_duration: stimulusDuration, // 前のグローバル変数で定義
    };
  // ---------------------------------------------------------------------
    // 質問内容を配列で定義
    ExamQuestions[ExamNumber] = [
      {
        prompt: '問１',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問２',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問３',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問４',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問５',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      }
    ];
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  // 問題7
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  ExamNumber = 7 ; // koko
  ExamText[ExamNumber] = '<div align="left" style="width:90%;margin:auto;">\
    <div style="writing-mode: vertical-rl; text-orientation: mixed; line-height: 2.2; font-size: 1.0em; letter-spacing: 0.1em; height: 600px; overflow-y: auto; font-family: &quot;MS Gothic&quot;, &quot;ＭＳ ゴシック&quot;, monospace;"> \
    文章７<br> \
    人は未来を予測することで、偶然を制御可能なものとみなそうとする。天気予報、株価の動向、個人のライフプラン――これらはすべて、不確実性に輪郭を与える試みである。だが興味深いのは、予測が的中すればするほど、その背後にある偶然性がかえって不可視化されていくという点である。予測が精度を増すとき、偶然は「誤差」として排除されるのだ。 \
    しかし、この構造は一つの幻想に支えられている。すなわち、偶然は予測によって矯正可能である、という信仰である。だが偶然は本質的に、法則から逸脱するものではなく、むしろ法則の内部で発生する余白そのものである。コインを投げる行為において、裏が出る確率は五割であっても、実際に出るのは一つだけである。この一回性において偶然は現れる。 \
    予測とはこの「一回性」を捨象する行為にほかならない。統計や傾向は、無数の過去の集積から導かれるが、個々の未来は常にそれを裏切り得る。ゆえに予測が成立するのは、偶然を無視する構造の上においてである。偶然を完全に織り込んだ予測は、もはや予測ではなく、ただの確率分布にすぎない。 \
    ところが現代社会では、予測が制度や計画の前提として機能するため、偶然の余地がますます否定されがちである。だが偶然こそが、世界に裂け目を開ける契機である。予測不能な出来事がなければ、新しい意味や価値も生まれない。偶然とは秩序の敵ではなく、秩序が自己更新するための「攪乱」として必要不可欠なのだ。 \
    結局、予測と偶然は対立ではなく、非対称な補完関係にある。予測は秩序を求め、偶然は裂け目を差し出す。その緊張のなかでしか、世界は意味を持ち得ないのである。 \
    </div></div>';
  // ---------------------------------------------------------------------
    Exam[ExamNumber] = { 
      type: jsPsychHtmlKeyboardResponse,
      margin_vertical: '100px',
      margin_horizontal: '100px',
      stimulus: ExamText[ExamNumber],
      choices: 'q',
      trial_duration: stimulusDuration, // 前のグローバル変数で定義
    };
  // ---------------------------------------------------------------------
    // 質問内容を配列で定義
    ExamQuestions[ExamNumber] = [
      {
        prompt: '問１ 筆者の議論全体から見て、最も根本的な主張に近いのはどれか。',
        options: [
          '　① 偶然性の排除こそが予測の精度向上に寄与するが、それは制度的秩序を過剰に硬直化させる。', 
          '　② 偶然は予測の失敗によってのみ意識されるが、実は秩序の構造的内在要因として機能している。', 
          '　③ 予測は偶然という異物を包摂しようとするが、それは結局、偶然の本質を誤解した営みにすぎない。', 
          '　④ 偶然と予測は原理的に矛盾するが、社会的には両者を統合せざるを得ないという緊張が存在する。', 
          '　⑤ 未来に意味を与えるのは予測であり、偶然はその意味付けに対する偶発的なノイズにすぎない。'
        ]
      },
      {
        prompt: '問２「予測が精度を増すとき、偶然は『誤差』として排除される」とあるが、この記述が含意している思考の落とし穴として最も適切なのはどれか。',
        options: [
          '　① 予測の正確性が偶然の発生頻度を減少させるという誤信が強化されること。', 
          '　② 精度の高い予測によって、偶然の価値が体系的に測定可能になるという錯覚が生まれること。', 
          '　③ 偶然を予測の余剰として扱うことで、予測が抱える構造的限界が見えなくなること。', 
          '　④ 予測の的中率が偶然性の存在そのものを否定する論理的飛躍につながること。', 
          '　⑤ 偶然と予測の関係を統計的に解釈することで、両者の原理的対立が見落とされること。'
        ]
      },
      {
        prompt: '問３ 本文において「一回性」が持つ概念的役割として最も適切なものはどれか。',
        options: [
          '　① 一回性は偶然を再現不可能にし、予測の範囲外にあるものとして扱うことを要請する。', 
          '　② 一回性は統計的予測の例外ではなく、むしろ偶然の現象性を担保する装置として位置づけられている。', 
          '　③ 一回性は予測が想定する反復性と矛盾するため、社会的には　排除される傾向が強い。', 
          '　④ 一回性とは、偶然を論理的に記述可能にするための境界概念にすぎない。', 
          '　⑤ 一回性がある限り、偶然は論理的体系の外に留まり続けるため、予測不可能性は絶対である。'
        ]
      },
      {
        prompt: '問４ 筆者の議論に照らして、現代社会における予測の制度的機能について最も妥当な理解はどれか。',
        options: [
          '　① 予測は社会秩序を設計する基盤であるが、その安定性ゆえに偶然の余地を意図的に作り出す機能も担っている。', 
          '　② 制度は偶然性を前提に設計されているが、予測の高度化によりその柔軟性が失われつつある。', 
          '　③ 現代社会では予測が制度的合理性の根幹となっており、それに　よって偶然性は秩序から排除される傾向にある。', 
          '　④ 社会制度は予測の失敗を前提に構築されており、偶然の発生によって再帰的に更新される構造を持つ。', 
          '　⑤ 予測は制度的な管理に奉仕するが、偶然の存在はむしろその制度を支える補助線として活用されている。'
        ]
      },
      {
        prompt: '問５ 本文の最終段落における「予測と偶然の非対称な補完関係」という表現の深層的な意味として、最も適切なのはどれか。',
        options: [
          '　① 予測が未来を描く際、偶然はその未来の図像を批判的に書き換える装置として作用する。', 
          '　② 偶然は予測によって条件づけられるが、予測は偶然によって常に修正を迫られる。', 
          '　③ 偶然は予測を脱構築することで、その制度的機能を強化するという逆説的役割を担う。', 
          '　④ 予測は秩序を形成する規範的作用を持ち、偶然はその構造を撹乱しつつ刷新する動的原理である。', 
          '　⑤ 偶然と予測は互いの存在を条件づける双方向的な対称関係にあり、世界はその平衡で成り立つ。'
        ]
      }
    ];
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  // 問題8
  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  ExamNumber = 8 ; // koko
  ExamText[ExamNumber] = '<div align="left" style="width:90%;margin:auto;">\
    <div style="writing-mode: vertical-rl; text-orientation: mixed; line-height: 2.2; font-size: 1.0em; letter-spacing: 0.1em; height: 600px; overflow-y: auto; font-family: &quot;MS Gothic&quot;, &quot;ＭＳ ゴシック&quot;, monospace;"> \
    文章８<br> \
    </div></div>';
  // ---------------------------------------------------------------------
    Exam[ExamNumber] = { 
      type: jsPsychHtmlKeyboardResponse,
      margin_vertical: '100px',
      margin_horizontal: '100px',
      stimulus: ExamText[ExamNumber],
      choices: 'q',
      trial_duration: stimulusDuration, // 前のグローバル変数で定義
    };
  // ---------------------------------------------------------------------
    // 質問内容を配列で定義
    ExamQuestions[ExamNumber] = [
      {
        prompt: '問１',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問２',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問３',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問４',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      },
      {
        prompt: '問５',
        options: [
          '　①', 
          '　②', 
          '　③', 
          '　④', 
          '　⑤'
        ]
      }
    ];

  // ---------------------------------------------------------------------
  // 試行を1セット作成してキューイング
  function addExamBlockToTimeline(ExamNumber) { 
    Trials.timeline.push(Exam[ExamNumber]); // 問題呈示部分をキューイング
    ExamAnswer[ExamNumber] = [];            // 縦書き質問群の配列を初期化
    MakeVerticalQuestions(ExamAnswer[ExamNumber], ExamQuestions[ExamNumber], ExamText[ExamNumber]) ;             // 縦書き質問群を作成
    for (let i = 0; i < ExamAnswer[ExamNumber].length; i++) { Trials.timeline.push(ExamAnswer[ExamNumber][i]); } // 縦書き質問群をキューイング
    Trials.timeline.push(QofFont);          // フォントの感想をキューイング
  } ;
  // ---------------------------------------------------------------------
  // 本番試行 引数?patternで指定したグループの出し分け
  // case '1': // グループ1 = 1→2→7→8
  // case '2': // グループ2 = 7→8→1→2
  // case '3': // グループ3 = 3→4→5→6
  // case '4': // グループ4 = 5→6→3→4
  // ---------------------------------------------------------------------
  switch (pattern) {
      // -----------------------------------------------------------------
      case '1': // グループ1 = 1→2→7→8
      default:
        addExamBlockToTimeline(1) ; Trials.timeline.push(resttime);
        addExamBlockToTimeline(2) ; Trials.timeline.push(resttime);
        addExamBlockToTimeline(7) ; Trials.timeline.push(resttime); 
        addExamBlockToTimeline(8) ; 
        break;
      // -----------------------------------------------------------------
      case '2': // グループ2 = 7→8→1→2
        addExamBlockToTimeline(7) ; Trials.timeline.push(resttime);
        addExamBlockToTimeline(8) ; Trials.timeline.push(resttime);
        addExamBlockToTimeline(1) ; Trials.timeline.push(resttime); 
        addExamBlockToTimeline(2) ; 
      break;
      // -----------------------------------------------------------------
      case '3': // グループ3 = 3→4→5→6
        addExamBlockToTimeline(3) ; Trials.timeline.push(resttime);
        addExamBlockToTimeline(4) ; Trials.timeline.push(resttime);
        addExamBlockToTimeline(5) ; Trials.timeline.push(resttime); 
        addExamBlockToTimeline(6) ; 
        break;
      // -----------------------------------------------------------------
      case '4': // グループ4 = 5→6→3→4
        addExamBlockToTimeline(5) ; Trials.timeline.push(resttime);
        addExamBlockToTimeline(6) ; Trials.timeline.push(resttime);
        addExamBlockToTimeline(3) ; Trials.timeline.push(resttime); 
        addExamBlockToTimeline(4) ; 
        break;
      case '0': // デバッグ用に全部
        addExamBlockToTimeline(1) ; addExamBlockToTimeline(2) ; addExamBlockToTimeline(3) ; addExamBlockToTimeline(4) ;
        addExamBlockToTimeline(5) ; addExamBlockToTimeline(6) ; addExamBlockToTimeline(7) ; addExamBlockToTimeline(8) ;
      break ;
    } // switch ここまで

    // ------------------------------------------------------------------------
    // 実験の開始
    // ------------------------------------------------------------------------

    jsPsych.run([enter_fullscreen,Page1, Page2, Page3,PracticeTrials, Trials, exit_fullscreen,bye]);
//    jsPsych.run([enter_fullscreen,Page1, Page2, Page3, PracticeTrials, Trials, exit_fullscreen,bye]);
    // ========================================================
    // プログラム本体の終わり
    // ========================================================
</script>
</head>
<body></body>
</html>
